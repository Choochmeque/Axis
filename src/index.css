@import 'tailwindcss';

/* Global user-select disable - must be outside @layer for highest priority */
*:not(input):not(textarea):not([contenteditable='true']):not(pre):not(code) {
  -webkit-user-select: none !important;
  user-select: none !important;
  cursor: default;
}

input,
textarea,
[contenteditable='true'],
pre,
code {
  -webkit-user-select: text !important;
  user-select: text !important;
  cursor: text;
}

@theme {
  /* Colors */
  --color-bg-primary: #1e1e1e;
  --color-bg-secondary: #252526;
  --color-bg-tertiary: #2d2d30;
  --color-bg-sidebar: #1e1e1e;
  --color-bg-toolbar: #2d2d30;
  --color-bg-statusbar: #007acc;
  --color-bg-header: #2d2d30;
  --color-bg-hover: #2a2d2e;
  --color-bg-active: #37373d;
  --color-bg-card: #2d2d30;
  --color-bg-code: #1e1e1e;
  --color-bg-badge: #4d4d4d;
  --color-bg-merge: rgba(86, 156, 214, 0.1);

  --color-text-primary: #cccccc;
  --color-text-secondary: #858585;
  --color-text-tertiary: #5a5a5a;
  --color-text-muted: #6e6e6e;

  --color-border: #3c3c3c;

  --color-accent: #0078d4;
  --color-accent-hover: #1084d8;

  --color-success: #4caf50;
  --color-warning: #ff9800;
  --color-error: #f44336;

  --color-diff-add-bg: rgba(35, 134, 54, 0.2);
  --color-diff-add-line: #2ea043;
  --color-diff-delete-bg: rgba(248, 81, 73, 0.2);
  --color-diff-delete-line: #f85149;
  --color-diff-hunk-bg: rgba(56, 139, 253, 0.1);

  /* Fonts */
  --font-sans:
    -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans',
    'Helvetica Neue', sans-serif;
  --font-mono: 'SF Mono', Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;

  /* Font sizes - 3-size scale relative to --app-font-size (default 13px) */
  --font-size-xs: calc(var(--app-font-size) * 0.769); /* ~10px at 13 base */
  --font-size-sm: calc(var(--app-font-size) * 0.846); /* ~11px at 13 base */
  --font-size-base: var(--app-font-size); /* 13px - base */
}

@layer base {
  /* Dark theme (default) */
  :root,
  [data-theme='dark'] {
    --bg-primary: #1e1e1e;
    --bg-secondary: #252526;
    --bg-tertiary: #2d2d30;
    --bg-sidebar: #1e1e1e;
    --bg-toolbar: #2d2d30;
    --bg-statusbar: #007acc;
    --bg-header: #2d2d30;
    --bg-hover: #2a2d2e;
    --bg-active: #37373d;
    --bg-card: #2d2d30;
    --bg-code: #1e1e1e;
    --bg-badge: #4d4d4d;
    --bg-merge: rgba(86, 156, 214, 0.1);
    --bg-uncommitted: rgba(255, 152, 0, 0.08);
    --bg-input: #3c3c3c;

    --text-primary: #cccccc;
    --text-secondary: #858585;
    --text-tertiary: #5a5a5a;
    --text-muted: #6e6e6e;
    --text-uncommitted: #ff9800;

    --border-color: #3c3c3c;

    --accent-color: #0078d4;
    --accent-hover: #1084d8;
    --accent-color-hover: #1084d8;

    --color-success: #4caf50;
    --color-warning: #ff9800;
    --color-error: #f44336;

    --diff-add-bg: rgba(35, 134, 54, 0.2);
    --diff-add-line: #2ea043;
    --diff-delete-bg: rgba(248, 81, 73, 0.2);
    --diff-delete-line: #f85149;
    --diff-hunk-bg: rgba(56, 139, 253, 0.1);

    --error-bg: rgba(244, 67, 54, 0.1);
    --error-color: #f44336;

    --success-bg: rgba(76, 175, 80, 0.1);
    --success-color: #4caf50;

    /* Git graph & ref colors (muted for dark theme) */
    --color-branch-local: #2d8a3e;
    --color-branch-remote: #7c54b8;
    --color-tag: #b86a2a;

    /* Git graph lane colors */
    --git-graph-color0: #0085d9;
    --git-graph-color1: #d9b600;
    --git-graph-color2: #00d97f;
    --git-graph-color3: #ff7a52;
    --git-graph-color4: #a481d9;
    --git-graph-color5: #ff5793;
    --git-graph-color6: #00d4d4;
    --git-graph-color7: #85d900;
    --git-graph-uncommitted: #808080;

    /* Table */
    --table-border: rgba(255, 255, 255, 0.15);
    --table-resize-border: rgba(255, 255, 255, 0.1);
    --table-resize-hover: rgba(255, 255, 255, 0.1);

    /* Misc */
    --color-checkerboard: #484848;

    color-scheme: dark;
  }

  /* Light theme */
  [data-theme='light'] {
    --bg-primary: #ffffff;
    --bg-secondary: #f5f5f5;
    --bg-tertiary: #e8e8e8;
    --bg-sidebar: #f3f3f3;
    --bg-toolbar: #f0f0f0;
    --bg-statusbar: #007acc;
    --bg-header: #e8e8e8;
    --bg-hover: #e8e8e8;
    --bg-active: #d4d4d4;
    --bg-card: #ffffff;
    --bg-code: #f5f5f5;
    --bg-badge: #e0e0e0;
    --bg-merge: rgba(0, 120, 212, 0.1);
    --bg-uncommitted: rgba(245, 124, 0, 0.1);
    --bg-input: #ffffff;

    --text-primary: #1f1f1f;
    --text-secondary: #616161;
    --text-tertiary: #9e9e9e;
    --text-muted: #757575;
    --text-uncommitted: #f57c00;

    --border-color: #d4d4d4;

    --accent-color: #0078d4;
    --accent-hover: #005a9e;
    --accent-color-hover: #005a9e;

    --color-success: #388e3c;
    --color-warning: #f57c00;
    --color-error: #d32f2f;

    --diff-add-bg: rgba(35, 134, 54, 0.15);
    --diff-add-line: #22863a;
    --diff-delete-bg: rgba(248, 81, 73, 0.15);
    --diff-delete-line: #cb2431;
    --diff-hunk-bg: rgba(0, 120, 212, 0.1);

    --error-bg: rgba(211, 47, 47, 0.1);
    --error-color: #d32f2f;

    --success-bg: rgba(56, 142, 60, 0.1);
    --success-color: #388e3c;

    /* Git graph & ref colors */
    --color-branch-local: #1a7f37;
    --color-branch-remote: #8250df;
    --color-tag: #bc4c00;

    /* Git graph lane colors */
    --git-graph-color0: #0969da;
    --git-graph-color1: #d9b600;
    --git-graph-color2: #1a7f37;
    --git-graph-color3: #bc4c00;
    --git-graph-color4: #8250df;
    --git-graph-color5: #bf3989;
    --git-graph-color6: #0a766a;
    --git-graph-color7: #0550ae;
    --git-graph-uncommitted: #6e6e6e;

    /* Table */
    --table-border: rgba(0, 0, 0, 0.15);
    --table-resize-border: rgba(0, 0, 0, 0.1);
    --table-resize-hover: rgba(0, 0, 0, 0.08);

    /* Misc */
    --color-checkerboard: #b0b0b0;

    color-scheme: light;
  }

  :root {
    --font-sans:
      -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans',
      'Helvetica Neue', sans-serif;
    --font-mono: 'SF Mono', Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    --app-font-size: 13px; /* Default, overridden by settings */
    font-family: var(--font-sans);
    font-size: var(--app-font-size);
    line-height: 1.4;
    font-weight: 400;
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html,
  body,
  #root {
    height: 100%;
    overflow: hidden;
  }

  body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  ::-webkit-scrollbar-track {
    background: var(--bg-secondary);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 5px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
  }

  /* Selection */
  ::selection {
    background-color: var(--accent-color);
    color: white;
  }

  /* Focus outline */
  :focus-visible {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
  }

  /* Form element resets */
  button,
  input,
  select,
  textarea {
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
    color: inherit;
    margin: 0;
  }

  button {
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;
  }

  input,
  select,
  textarea {
    background: transparent;
    border: none;
    outline: none;
    text-transform: none;
  }

  select {
    appearance: none;
  }

  /* Code */
  code {
    font-family: var(--font-mono);
  }

  /* Diff/code text - uses configurable font size */
  .diff-text {
    font-size: var(--app-font-size);
  }

  /* Resize handle for panels */
  .resize-handle {
    width: 4px;
    background: var(--border-color);
    cursor: col-resize;
    transition: background-color 0.15s;
  }

  .resize-handle-vertical {
    height: 4px;
    background: var(--border-color);
    cursor: row-resize;
    transition: background-color 0.15s;
  }

  .resize-handle:hover,
  .resize-handle[data-resize-handle-active],
  .resize-handle-vertical:hover,
  .resize-handle-vertical[data-resize-handle-active] {
    background: var(--accent-color);
  }

  /* Column divider for table headers */
  .col-divider {
    width: 9px;
    align-self: stretch;
    margin: 0 2px;
    background: transparent;
    cursor: col-resize;
    position: relative;
    flex-shrink: 0;
    z-index: 1;
  }

  .col-divider::after {
    content: '';
    position: absolute;
    left: 4px;
    top: 50%;
    transform: translateY(-50%);
    width: 1px;
    height: 12px;
    background: var(--border-color);
    transition: background-color 0.15s;
    pointer-events: none;
  }

  .col-divider:hover::after,
  .col-divider:active::after {
    background: var(--accent-color);
  }

  /* Radix UI Dialog/Dropdown overrides */
  [data-radix-popper-content-wrapper] {
    z-index: 11000 !important;
  }
} /* end @layer base */

@layer components {
  /* Dialog overlay classes */
  .dialog-overlay {
    @apply fixed inset-0 bg-black/50 z-9999;
  }

  .dialog-overlay-centered {
    @apply fixed inset-0 bg-black/50 z-9999 flex items-center justify-center;
  }

  .dialog-overlay-animated {
    @apply fixed inset-0 bg-black/50 z-9999;
    animation: fade-in 150ms ease-out;
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes dialog-in {
    from {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
  }

  /* Dialog classes */
  .dialog-content {
    @apply fixed bg-(--bg-primary) rounded-lg shadow-xl w-[90vw] max-h-[85vh] p-0 overflow-y-auto z-10000;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    animation: dialog-in 150ms ease-out;
  }

  .dialog-title {
    @apply flex items-center gap-2 py-4 px-5 m-0 text-base font-semibold text-(--text-primary) border-b border-(--border-color);
  }

  .dialog-body {
    @apply p-5;
  }

  .dialog-footer {
    @apply flex justify-end gap-2 py-4 px-5 border-t border-(--border-color);
  }

  .dialog-info-box {
    @apply p-3 bg-(--bg-secondary) rounded mb-4;
  }

  /* Skeleton loading */
  @keyframes skeleton-pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.4;
    }
  }

  .skeleton {
    @apply bg-(--bg-tertiary) rounded;
    animation: skeleton-pulse 1.5s ease-in-out infinite;
  }

  /* Context Menu classes */
  @keyframes menu-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .menu-content {
    @apply min-w-50 bg-(--bg-secondary) border border-(--border-color) rounded-md p-1 shadow-lg z-10000;
    animation: menu-in 100ms ease-out;
  }

  .menu-item {
    @apply flex items-center gap-2 py-1.5 px-2 rounded text-base text-(--text-primary) cursor-pointer outline-none select-none;
    @apply hover:bg-(--bg-tertiary) focus:bg-(--bg-tertiary) data-highlighted:bg-(--bg-tertiary);
    @apply data-disabled:text-(--text-tertiary) data-disabled:cursor-not-allowed;
  }

  .menu-item-danger {
    @apply flex items-center gap-2 py-1.5 px-2 rounded text-base text-error cursor-pointer outline-none select-none;
    @apply hover:bg-error/15 focus:bg-error/15 data-highlighted:bg-error/15;
    @apply data-disabled:text-(--text-tertiary) data-disabled:cursor-not-allowed data-disabled:hover:bg-transparent;
  }

  .menu-separator {
    @apply h-px bg-(--border-color) my-1;
  }

  .menu-hint {
    @apply ml-auto text-sm text-(--text-tertiary);
  }

  .menu-chevron {
    @apply ml-auto text-(--text-tertiary);
  }

  /* Button classes */
  .btn {
    @apply py-2 px-4 text-base font-medium rounded cursor-pointer transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-icon {
    @apply flex items-center gap-1.5 py-2 px-4 text-base font-medium rounded cursor-pointer transition-colors disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply bg-transparent border border-(--border-color) text-(--text-primary) hover:bg-(--bg-hover) disabled:hover:bg-transparent;
  }

  .btn-primary {
    @apply bg-(--accent-color) border border-(--accent-color) text-white hover:opacity-90 disabled:hover:opacity-50;
  }

  /* Input classes */
  .input {
    @apply w-full py-2 px-3 text-sm bg-(--bg-secondary) border border-(--border-color) rounded text-(--text-primary) outline-none transition-colors focus:border-(--accent-color);
  }

  /* Label classes */
  .label {
    @apply block mb-1.5 text-base font-medium text-(--text-secondary);
  }

  /* Field classes */
  .field {
    @apply mb-4 last:mb-0;
  }

  /* Checkbox classes (Radix UI) */
  .checkbox {
    @apply flex items-center justify-center w-4 h-4 rounded border border-(--border-color) bg-(--bg-primary) shrink-0 transition-colors;
    @apply data-[state=checked]:bg-(--accent-color) data-[state=checked]:border-(--accent-color);
  }

  .checkbox-field {
    @apply flex items-center gap-2 mb-4 last:mb-0;
  }

  .checkbox-label {
    @apply text-base text-(--text-primary) cursor-pointer select-none;
  }

  /* Alert/Message classes */
  .alert {
    @apply flex items-start gap-2 p-3 rounded-md text-base;
  }

  .alert-error {
    @apply bg-error/10 border border-error text-error;
  }

  .alert-success {
    @apply bg-success/10 border border-success text-success;
  }

  .alert-warning {
    @apply bg-warning/10 border border-warning text-warning;
  }

  .alert-inline {
    @apply py-2 px-3 rounded text-base;
    -webkit-user-select: text !important;
    user-select: text !important;
    cursor: text;
  }

  /* Toast notifications */
  .toast-container {
    @apply fixed bottom-10 right-4 z-[12000] flex flex-col gap-2 max-w-sm;
  }

  .toast {
    @apply relative flex items-start gap-2 p-3 pr-8 rounded-md shadow-lg border text-sm;
    @apply bg-(--bg-secondary) border-(--border-color);
    animation: toast-in 0.2s ease-out;
  }

  @media (prefers-reduced-motion: reduce) {
    .toast {
      animation: none;
    }
  }

  @keyframes toast-in {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .toast-error {
    @apply bg-error/10 border-error text-error;
  }

  .toast-success {
    @apply bg-success/10 border-success text-success;
  }

  .toast-warning {
    @apply bg-warning/10 border-warning text-warning;
  }

  .toast-info {
    @apply bg-(--accent-color)/10 border-(--accent-color) text-(--accent-color);
  }

  .toast-icon {
    @apply shrink-0 mt-0.5;
  }

  .toast-content {
    @apply flex flex-col gap-0.5 flex-1 min-w-0;
  }

  .toast-title {
    @apply font-medium;
  }

  .toast-description {
    @apply text-xs opacity-80;
  }

  .toast-dismiss {
    @apply absolute top-2 right-2 p-1 rounded opacity-60 cursor-pointer transition-opacity;
    @apply hover:opacity-100;
    @apply bg-transparent border-none;
    color: inherit;
  }

  .toast-progress-track {
    @apply absolute bottom-0 left-0 right-0 h-0.5 bg-black/10 rounded-b-md overflow-hidden;
  }

  .toast-progress {
    @apply h-full transition-[width] duration-100 ease-linear;
    background: currentColor;
    opacity: 0.3;
  }

  /* Toast history dropdown */
  .toast-history-wrapper {
    @apply relative;
  }

  .toast-history-trigger {
    @apply flex items-center justify-center w-6 h-6 p-0 rounded cursor-pointer transition-colors;
    @apply bg-transparent border-none text-(--text-secondary) hover:text-(--text-primary) hover:bg-(--bg-hover);
  }

  .toast-history-badge {
    @apply absolute -top-1 -right-1 min-w-4 h-4 px-1 rounded-full text-[10px] font-medium;
    @apply bg-(--accent-color) text-white flex items-center justify-center;
  }

  .toast-history-dropdown {
    @apply absolute bottom-full right-0 mb-2 w-80 max-h-96 overflow-hidden;
    @apply bg-(--bg-secondary) border border-(--border-color) rounded-md shadow-lg;
    @apply flex flex-col;
  }

  .toast-history-empty {
    @apply p-4 text-center text-(--text-tertiary) text-sm;
  }

  .toast-history-list {
    @apply flex-1 overflow-y-auto;
  }

  .toast-history-item {
    @apply flex items-start gap-2 p-2 border-b border-(--border-color) last:border-b-0;
  }

  .toast-history-item-error {
    @apply text-error;
  }

  .toast-history-item-success {
    @apply text-success;
  }

  .toast-history-item-warning {
    @apply text-warning;
  }

  .toast-history-item-info {
    @apply text-(--accent-color);
  }

  .toast-history-item-icon {
    @apply shrink-0 mt-0.5;
  }

  .toast-history-item-content {
    @apply flex-1 min-w-0;
  }

  .toast-history-item-title {
    @apply text-sm font-medium truncate;
  }

  .toast-history-item-description {
    @apply text-xs opacity-70 truncate;
  }

  .toast-history-item-time {
    @apply text-xs text-(--text-tertiary) shrink-0;
  }

  .toast-history-clear {
    @apply w-full p-2 text-sm text-center cursor-pointer transition-colors;
    @apply bg-(--bg-tertiary) border-none border-t border-(--border-color) text-(--text-secondary);
    @apply hover:bg-(--bg-hover) hover:text-(--text-primary);
  }

  /* Operations Indicator */
  .operations-wrapper {
    @apply relative;
  }

  .operations-trigger {
    @apply flex items-center justify-center w-6 h-6 p-0 rounded cursor-pointer transition-colors;
    @apply bg-transparent border-none text-(--text-secondary) hover:text-(--text-primary) hover:bg-(--bg-hover);
  }

  .operations-spinner {
    @apply animate-spin;
  }

  .operations-badge {
    @apply absolute -top-1 -right-1 min-w-4 h-4 px-1 rounded-full text-[10px] font-medium;
    @apply bg-warning text-white flex items-center justify-center;
  }

  .operations-dropdown {
    @apply absolute bottom-full right-0 mb-2 w-72 max-h-80 overflow-hidden;
    @apply bg-(--bg-secondary) border border-(--border-color) rounded-md shadow-lg;
    @apply flex flex-col;
  }

  .operations-header {
    @apply px-3 py-2 text-sm font-semibold text-(--text-primary) border-b border-(--border-color);
  }

  .operations-list {
    @apply flex-1 overflow-y-auto;
  }

  .operations-item {
    @apply flex items-start gap-2 p-2 border-b border-(--border-color) last:border-b-0;
  }

  .operations-item-spinner {
    @apply shrink-0 mt-0.5 text-(--accent-color) animate-spin;
  }

  .operations-item-content {
    @apply flex-1 min-w-0;
  }

  .operations-item-name {
    @apply text-sm font-medium text-(--text-primary) truncate;
  }

  .operations-item-description {
    @apply text-xs text-(--text-secondary) truncate;
  }

  .operations-item-time {
    @apply text-xs text-(--text-tertiary) shrink-0;
  }

  .operations-progress-bar {
    @apply h-1.5 w-full bg-(--bg-tertiary) rounded-full mt-1.5 overflow-hidden;
  }

  .operations-progress-fill {
    @apply h-full bg-(--accent-color) rounded-full transition-[width] duration-150 ease-out;
  }

  .operations-progress-text {
    @apply text-xs text-(--text-secondary) mt-1;
  }

  /* Dropdown classes (Radix UI) */
  .dropdown-button {
    @apply flex items-center gap-1 py-1 px-2 border border-(--border-color) bg-(--bg-secondary) text-(--text-primary) text-xs cursor-pointer rounded transition-colors hover:bg-(--bg-hover);
  }

  .dropdown-content {
    @apply min-w-48 bg-(--bg-secondary) border border-(--border-color) rounded-md p-1 shadow-lg z-50;
  }

  .dropdown-item {
    @apply flex items-center gap-2 py-1.5 px-2 text-base text-(--text-primary) rounded cursor-pointer outline-none relative hover:bg-(--bg-hover) data-[highlighted]:bg-(--bg-hover) data-disabled:text-(--text-tertiary) data-disabled:cursor-default;
  }

  .dropdown-item-danger {
    @apply flex items-center gap-2 py-1.5 px-2 text-base rounded cursor-pointer outline-none relative data-disabled:cursor-default;
    @apply text-error hover:bg-error/10 data-highlighted:bg-error/10 data-disabled:opacity-50;
  }

  .dropdown-label {
    @apply px-2 py-1 text-sm text-(--text-tertiary) uppercase;
  }

  .dropdown-separator {
    @apply h-px bg-(--border-color) my-1;
  }

  /* Reference Mention Dropdown */
  .reference-mention-dropdown {
    @apply fixed bg-(--bg-secondary) border border-(--border-color) rounded-md shadow-lg p-1;
    z-index: 11000;
    max-height: 200px;
    overflow-y: auto;
    width: 320px;
  }

  .reference-mention-item {
    @apply flex items-center gap-2 py-1.5 px-2 text-sm rounded cursor-pointer;
    @apply hover:bg-(--bg-hover) data-[selected=true]:bg-(--bg-hover);
  }

  .reference-mention-icon {
    @apply shrink-0 text-(--text-tertiary);
  }

  .reference-mention-number {
    @apply font-mono text-(--text-secondary) shrink-0;
  }

  .reference-mention-title {
    @apply flex-1 truncate text-(--text-primary);
  }

  .reference-mention-empty {
    @apply py-3 px-2 text-center text-(--text-tertiary) text-sm;
  }

  /* Close button */
  .btn-close {
    @apply flex items-center justify-center w-7 h-7 p-0 bg-transparent border-none rounded text-(--text-secondary) cursor-pointer transition-colors hover:bg-(--bg-hover) hover:text-(--text-primary);
  }

  /* Sidebar section header */
  .sidebar-section-header {
    @apply flex items-center gap-2 w-full py-2 px-3 bg-transparent border-none text-(--text-secondary) text-sm font-semibold uppercase tracking-wide cursor-pointer transition-colors hover:bg-(--bg-hover);
  }

  .sidebar-section-header > svg:nth-child(2) {
    width: 18px;
    height: 18px;
  }

  /* Badge */
  .badge {
    @apply py-0.5 px-1.5 rounded-full text-xs font-semibold bg-(--bg-badge) text-(--text-primary);
  }

  /* Rebase Preview Diagram */
  .rebase-preview {
    @apply flex items-stretch gap-3 p-3 bg-(--bg-secondary) rounded-md;
  }

  .rebase-preview-panel {
    @apply flex-1 flex flex-col min-w-0;
  }

  .rebase-preview-header {
    @apply text-sm font-semibold uppercase text-(--text-tertiary) mb-1 text-center tracking-wide;
  }

  .rebase-preview-branch-info {
    @apply text-center mb-2;
  }

  .rebase-preview-branch-name {
    @apply text-xs font-semibold font-mono;
  }

  .rebase-preview-svg {
    @apply flex-1 block;
  }

  .rebase-preview-arrow {
    @apply flex items-center justify-center text-(--text-tertiary) px-1;
  }

  .rebase-preview-commit-label {
    font-size: var(--font-size-xs);
    font-family: var(--font-mono);
  }

  .rebase-preview-branch-label {
    font-size: var(--font-size-xs);
    font-weight: 600;
  }

  .rebase-preview-empty {
    @apply flex items-center justify-center p-4 bg-(--bg-secondary) rounded-md;
  }

  .historyEmptyState {
    @apply flex flex-col items-center justify-center flex-1 h-full text-(--text-secondary) gap-3;
  }

  /* Commit Graph Styles */

  #commitGraphContent {
    position: relative;
  }

  #commitGraph {
    display: block;
    position: absolute;
    left: 0;
    top: 0;
    z-index: 2;
    pointer-events: none;
  }

  #commitGraph circle {
    pointer-events: all;
    cursor: pointer;
  }

  #commitGraph circle.current {
    fill: var(--bg-primary);
    stroke-width: 2;
  }

  #commitGraph circle:not(.current) {
    stroke: var(--bg-primary);
    stroke-width: 1;
    stroke-opacity: 0.75;
  }

  #commitGraph circle.stashInner {
    stroke-opacity: 1;
    pointer-events: none;
    fill: transparent;
  }

  #commitGraph path.shadow {
    fill: none;
    stroke: var(--bg-primary);
    stroke-opacity: 0.75;
    stroke-width: 4;
  }

  #commitGraph path.line {
    fill: none;
    stroke-width: 2;
  }

  #commitGraph path.line.uncommitted {
    stroke: var(--git-graph-uncommitted);
  }

  #commitGraph circle.uncommitted {
    fill: var(--git-graph-uncommitted);
  }

  #commitGraph circle.current.uncommitted {
    stroke: var(--git-graph-uncommitted);
  }

  /* Commit Table */

  #commitTable {
    z-index: 1;
  }

  #commitTable table {
    width: 100%;
    border-collapse: collapse;
  }

  #commitTable table,
  #commitTable tbody,
  #commitTable tr,
  #commitTable th,
  #commitTable td {
    padding: 0;
    margin: 0;
  }

  #commitTable th,
  #commitTable td {
    white-space: nowrap;
    font-size: 13px;
    cursor: default;
    text-overflow: ellipsis;
    overflow: hidden;
  }

  #commitTable td {
    line-height: 24px;
    padding: 0 4px;
  }

  #commitTable th {
    border-bottom: 1px solid var(--table-border);
    line-height: 18px;
    padding: 6px 12px;
    text-align: left;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    font-size: 11px;
    position: sticky;
    top: 0;
    background-color: var(--bg-primary);
    z-index: 10;
  }

  /* Resize handles */
  .resizeCol {
    position: absolute;
    top: 0;
    height: 100%;
    display: block;
    width: 6px;
    cursor: col-resize;
  }

  .resizeCol.left {
    left: 0;
    border-left: 1px solid var(--table-resize-border);
  }

  .resizeCol.right {
    right: 0;
  }

  .resizeCol:hover {
    background-color: var(--table-resize-hover);
  }

  /* Fixed layout table */
  #commitTable table.fixedLayout {
    table-layout: fixed;
  }

  /* Description column takes remaining space */
  #commitTable table.autoLayout td:nth-child(2),
  #commitTable table.autoLayout th:nth-child(2) {
    width: 100%;
    max-width: 0;
  }

  /* Author column max width */
  #commitTable table.autoLayout td.authorCol,
  #commitTable table.autoLayout th.authorCol {
    max-width: 124px;
  }

  /* Author cell with avatar */
  #commitTable .authorCell {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  /* Responsive column widths */
  @media screen and (max-width: 850px) {
    #commitTable table.autoLayout td.dateCol,
    #commitTable table.autoLayout th.dateCol,
    #commitTable table.autoLayout td.authorCol,
    #commitTable table.autoLayout th.authorCol {
      max-width: 100px;
    }
  }

  @media screen and (max-width: 700px) {
    #commitTable table.autoLayout td.dateCol,
    #commitTable table.autoLayout th.dateCol,
    #commitTable table.autoLayout td.authorCol,
    #commitTable table.autoLayout th.authorCol {
      max-width: 80px;
    }
  }

  #commitGraph {
    overflow: hidden;
  }

  #commitTable tr.commit td {
    cursor: pointer;
  }

  #commitTable tr.commit:hover {
    background-color: var(--bg-hover);
  }

  #commitTable tr.commit.selected {
    background-color: var(--bg-active);
  }

  #commitTable tr.commit.graphVertexActive {
    background-color: var(--bg-hover);
  }

  #commitTable tr.commit.current span.description .text {
    font-weight: bold;
  }

  #commitTable tr.commit span.description {
    display: flex;
    align-items: center;
  }

  #commitTable tr.commit span.description .commitHeadDot,
  #commitTable tr.commit td span.description .gitRef {
    flex-shrink: 0;
  }

  #commitTable tr.commit span.description .text {
    display: inline-block;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
    flex-grow: 1;
  }

  #commitTable tr.commit.mute td.text,
  #commitTable tr.commit.mute span.description .text {
    opacity: 0.5;
  }

  /* Git Ref badges */

  .gitRef {
    display: inline-flex;
    align-items: center;
    gap: 2px;
    margin-right: 4px;
    padding: 0 6px;
    height: 18px;
    border-radius: 3px;
    font-size: 11px;
    font-weight: 600;
    color: white;
    vertical-align: middle;
  }

  .gitRef.head {
    font-weight: 700;
  }

  .gitRef svg {
    width: 10px;
    height: 10px;
    flex-shrink: 0;
  }

  /* Git Graph Cell */
  .graph-cell {
    flex-shrink: 0;
  }

  .graph-line {
    stroke-width: 2;
    stroke-linecap: round;
  }

  .graph-line.uncommitted {
    stroke-dasharray: 3 2;
    stroke: var(--git-graph-uncommitted);
  }

  .graph-line.merge {
    stroke-width: 2;
  }

  .graph-line.merge-preview {
    stroke-dasharray: 5 3;
    stroke: var(--accent-color);
    opacity: 0.7;
  }

  .graph-node {
    stroke-width: 1;
  }

  /* Conventional Commits Form */
  .cc-form {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    flex: 1;
    min-height: 0;
  }

  .cc-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-shrink: 0;
  }

  .cc-type-select {
    width: 6rem;
    flex-shrink: 0;
  }

  .cc-scope-input {
    width: 7rem;
    flex-shrink: 0;
  }

  .cc-subject-input {
    width: 100%;
    flex-shrink: 0;
  }

  .cc-breaking-label {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.75rem;
    color: var(--text-secondary);
    cursor: pointer;
    flex-shrink: 0;
  }

  .cc-breaking-label span {
    font-weight: 600;
    color: var(--color-warning);
  }

  .cc-char-count {
    font-size: 0.7rem;
    color: var(--text-tertiary);
    text-align: right;
    flex-shrink: 0;
  }

  .cc-body {
    min-height: 3rem;
    flex: 1;
  }

  /* Virtual List */
  .virtual-list-item {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.15s;
  }

  .virtual-list-item:hover {
    background-color: var(--bg-hover);
  }

  .virtual-list-item--selected {
    background-color: var(--bg-active);
  }
}

/* ==================== Interactive Rebase ==================== */

.interactive-rebase-list {
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  background: var(--bg-secondary);
}

.interactive-rebase-entry {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  border-bottom: 1px solid var(--border-color);
  transition: background-color 0.15s ease;
}

.interactive-rebase-entry:last-child {
  border-bottom: none;
}

.interactive-rebase-entry:hover {
  background: var(--bg-hover);
}

.interactive-rebase-entry.dropped {
  opacity: 0.5;
}

.interactive-rebase-entry .entry-grip {
  cursor: grab;
  color: var(--text-tertiary);
  flex-shrink: 0;
}

.interactive-rebase-entry .entry-grip:hover {
  color: var(--text-secondary);
}

.interactive-rebase-entry .entry-action-select {
  width: 5.5rem;
  flex-shrink: 0;
}

.interactive-rebase-entry .entry-oid {
  font-family: var(--font-mono);
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--accent-color);
  flex-shrink: 0;
}

.interactive-rebase-entry .entry-summary {
  flex: 1;
  font-size: 0.875rem;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0;
}

.interactive-rebase-entry .entry-move-buttons {
  display: flex;
  align-items: center;
  gap: 0.125rem;
  flex-shrink: 0;
}
